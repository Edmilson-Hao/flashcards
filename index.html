<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Flashcards Ebbinghaus</title>
    <!-- Carrega o Tailwind CSS para estilos base e utilitários -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Carrega estilos customizados -->
    <link rel="stylesheet" href="style.css">
</head>
<body class="notification min-h-screen flex flex-col">

    <!-- Container Principal da Aplicação -->
    <div id="app-container" class="flex flex-col flex-grow items-center justify-center p-4">

        <!-- 0. Tela de Carregamento (Inicialmente visível) -->
        <div id="view-loading" class="view w-full h-screen flex flex-col items-center justify-center text-gray-500">
            <svg class="animate-spin -ml-1 mr-3 h-8 w-8 text-indigo-600" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
            </svg>
            <p class="mt-4">Verificando autenticação...</p>
        </div>

        <!-- 1. Tela de Login -->
        <div id="view-login" class="view hidden">
            <div class="bg-white p-8 rounded-xl shadow-2xl max-w-sm w-full text-center">
                <h1 class="text-3xl font-bold text-gray-800 mb-6">Bem-Vindo ao Flashcards!</h1>
                <p class="text-gray-600 mb-8">Faça login para começar a gerenciar seus flashcards.</p>
                <button id="btn-login-google" class="w-full flex items-center justify-center bg-blue-600 text-white font-semibold py-3 px-4 rounded-lg hover:bg-blue-700 transition duration-300 shadow-md">
                    <svg class="w-5 h-5 mr-3" fill="currentColor" viewBox="0 0 48 48">
                        <path d="M24 9.5c3.2 0 5.8 1.1 7.7 2.9l5.1-5.1C33.7 3.5 29.2 1 24 1 15.6 1 8.5 5.5 4.7 12.3l6.5 5c1.7-5.1 6.6-8.8 12.8-8.8z" fill="#EA4335"/><path d="M46.7 24.5c0-1.7-.1-3.3-.4-4.9H24v9.2h12.5c-.6 3.1-2.4 5.7-4.9 7.5l6.7 5.2c4.1-3.8 6.5-9.3 6.5-15.5z" fill="#4285F4"/><path d="M10.2 29.7c-.5-1.5-.7-3.1-.7-4.7s.2-3.2.7-4.7l-6.5-5.1C3.4 17.5 3 20.9 3 24.5s.4 7 1.2 10.3l6-5.1z" fill="#FBBC05"/><path d="M24 47.9c6.4 0 11.9-2.1 15.9-5.7l-6.7-5.2c-2.3 1.5-5.2 2.4-9.2 2.4-6.2 0-11.2-4-13.1-9.5l-6.5 5.1c3.8 6.8 11.1 11.3 18.5 11.3z" fill="#34A853"/>
                    </svg>
                    Entrar com Google
                </button>
                <div id="login-message" class="mt-4 text-sm text-red-500 hidden"></div>
            </div>
        </div>

        <!-- 2. Tela Home (Menu) -->
        <div id="view-home" class="view hidden w-full h-full flex flex-col items-center justify-center p-4">
            <h1 class="text-4xl font-extrabold text-gray-900 mb-10">FLASH CARDS</h1>

            <!-- Layout conforme imagem: 66vw de largura e alinhamento vertical/horizontal -->
            <div class="flex flex-col space-y-4 items-center w-full max-w-xl md:w-66vw" style="max-height: 80vh;">
                <button id="btn-home-adicionar" class="w-full bg-indigo-600 text-white text-xl font-bold py-4 rounded-lg hover:bg-indigo-700 transition duration-300 shadow-lg">
                    Adicionar Cards
                </button>
                <button id="btn-home-revisar" class="w-full bg-green-600 text-white text-xl font-bold py-4 rounded-lg hover:bg-green-700 transition duration-300 shadow-lg">
                    Revisar
                </button>
                <button id="btn-home-biblioteca" class="w-full bg-teal-600 text-white text-xl font-bold py-4 rounded-lg hover:bg-teal-700 transition duration-300 shadow-lg">
                    Biblioteca
                </button>
            </div>

            <!-- Informação do Usuário (Rodapé/Cantoneira) -->
            <div class="fixed bottom-4 right-4 bg-white p-3 rounded-lg shadow-xl text-sm text-gray-700 z-10">
                Usuário: <span id="user-display">Carregando...</span> (<span id="user-id-display">...</span>)
                <button id="btn-logout" class="ml-3 text-red-500 hover:text-red-700 font-medium">Sair</button>
            </div>
        </div>

        <!-- 3. Tela de Adicionar Cards (Sub-menu) -->
        <div id="view-add-menu" class="view hidden w-full flex flex-col items-center justify-center p-4">
            <h1 class="text-3xl font-bold text-gray-800 mb-10">ADICIONAR CARDS</h1>
            <div class="flex flex-col space-y-6 w-full max-w-lg">
                <button id="btn-add-manual" class="w-full bg-indigo-500 text-white text-lg font-semibold py-4 rounded-lg hover:bg-indigo-600 transition duration-300 shadow-lg">
                    Manual (Individualmente)
                </button>
                <button id="btn-add-automatico" class="w-full bg-purple-500 text-white text-lg font-semibold py-4 rounded-lg hover:bg-purple-600 transition duration-300 shadow-lg">
                    Automático (JSON em Massa)
                </button>
            </div>
            <button id="btn-back-from-add-menu" class="mt-8 text-gray-500 hover:text-gray-700 font-medium">← Voltar para Home</button>
        </div>

        <!-- 3a. Div Adicionar Manual -->
        <div id="view-add-manual" class="view hidden w-full max-w-2xl bg-white p-8 rounded-xl shadow-2xl">
            <h2 class="text-2xl font-bold text-gray-800 mb-6">Cadastro Manual de Flashcard</h2>
            <form id="form-add-manual" class="space-y-4">
                <div>
                    <label class="block text-sm font-medium text-gray-700">Idioma do Card</label>
                    <input type="text" id="manual-idioma" required class="mt-1 block w-full rounded-md border-gray-300 shadow-sm p-3 border">
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700">Palavra / Frase</label>
                    <input type="text" id="manual-palavra" required class="mt-1 block w-full rounded-md border-gray-300 shadow-sm p-3 border">
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700">Tradução</label>
                    <input type="text" id="manual-traducao" required class="mt-1 block w-full rounded-md border-gray-300 shadow-sm p-3 border">
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700">Exemplos de Uso (Separe com ponto e vírgula ';')</label>
                    <textarea id="manual-exemplos" rows="4" required class="mt-1 block w-full rounded-md border-gray-300 shadow-sm p-3 border"></textarea>
                </div>
                <button type="submit" class="w-full bg-green-500 text-white font-semibold py-3 rounded-lg hover:bg-green-600 transition duration-300">
                    Salvar Card
                </button>
            </form>
            <div id="manual-message" class="mt-4 text-center font-medium"></div>
            <button id="btn-back-from-manual" class="mt-6 text-gray-500 hover:text-gray-700 font-medium">← Voltar</button>
        </div>

        <!-- 3b. Div Adicionar Automático (JSON) -->
        <div id="view-add-automatico" class="view hidden w-full max-w-2xl bg-white p-8 rounded-xl shadow-2xl">
            <h2 class="text-2xl font-bold text-gray-800 mb-6">Cadastro Automático (JSON)</h2>
            <p class="text-gray-600 mb-4">Cole o array JSON de flashcards no formato abaixo:</p>
            <pre class="bg-gray-100 p-3 rounded-md text-sm text-gray-700 mb-4 overflow-auto">
[
  {
    "idioma": "Inglês",
    "palavra": "Ephemeral",
    "traducao": "Efêmero",
    "exemplos": [
      "The beauty of a sunset is ephemeral.",
      "Ephemeral trends come and go quickly.",
      "His fame proved to be an ephemeral thing.",
      "We enjoyed the ephemeral pleasure of the picnic."
    ]
  },
  // ... mais cards
]
            </pre>
            <textarea id="automatico-json-input" rows="10" placeholder='Cole seu JSON aqui...' class="mt-1 block w-full rounded-md border-gray-300 shadow-sm p-3 border"></textarea>
            <button id="btn-processar-json" class="w-full mt-4 bg-purple-600 text-white font-semibold py-3 rounded-lg hover:bg-purple-700 transition duration-300">
                Processar e Salvar Cards
            </button>
            <div id="automatico-message" class="mt-4 text-center font-medium"></div>
            <button id="btn-back-from-automatico" class="mt-6 text-gray-500 hover:text-gray-700 font-medium">← Voltar</button>
        </div>

        <!-- 4. Tela de Revisão -->
        <div id="view-revisao" class="view hidden w-full flex flex-col items-center p-4">
            <h1 class="text-3xl font-bold text-gray-800 mb-6">REVISÃO DE FLASHCARDS</h1>

            <div id="flashcard-area" class="w-full max-w-xl md:max-w-md h-80 relative mb-8">
                <!-- O Flashcard principal -->
                <div id="flashcard-container" class="flashcard-flip w-full h-full">

                    <!-- Frente do Card (Palavra/Frase) -->
                    <div id="card-front" class="flashcard-face bg-white border-2 border-indigo-500">
                        <span id="card-idioma-front" class="absolute top-4 left-4 text-sm font-semibold text-indigo-600 bg-indigo-100 px-2 py-1 rounded-full">Idioma</span>
                        <p id="card-palavra-front" class="text-4xl font-extrabold text-gray-900 text-center"></p>
                    </div>

                    <!-- Verso do Card (Tradução e Detalhes) -->
                    <div id="card-back" class="flashcard-face flashcard-back bg-gray-100 border-2 border-indigo-500">
                        <p class="text-xl font-bold text-gray-700 mb-2">Tradução:</p>
                        <p id="card-traducao-back" class="text-3xl font-extrabold text-indigo-700 text-center mb-6"></p>
                        <p class="text-lg font-bold text-gray-700 mb-2">Exemplos de Uso:</p>
                        <ul id="card-exemplos-back" class="list-disc list-inside text-left text-sm text-gray-600 w-full px-4 space-y-1">
                            <!-- Exemplos serão inseridos aqui -->
                        </ul>
                    </div>
                </div>
            </div>

            <!-- Controles de Revisão -->
            <div id="review-controls" class="w-full max-w-xl md:max-w-md">

                <!-- Modo Múltipla Escolha -->
                <div id="quiz-options-container" class="space-y-3">
                    <button class="quiz-option-btn w-full bg-gray-50 text-gray-800 font-semibold py-3 px-4 rounded-lg border-2 border-gray-200 hover:bg-indigo-50 transition duration-150 shadow-md text-left" data-index="0"></button>
                    <button class="quiz-option-btn w-full bg-gray-50 text-gray-800 font-semibold py-3 px-4 rounded-lg border-2 border-gray-200 hover:bg-indigo-50 transition duration-150 shadow-md text-left" data-index="1"></button>
                    <button class="quiz-option-btn w-full bg-gray-50 text-gray-800 font-semibold py-3 px-4 rounded-lg border-2 border-gray-200 hover:bg-indigo-50 transition duration-150 shadow-md text-left" data-index="2"></button>
                    <button class="quiz-option-btn w-full bg-gray-50 text-gray-800 font-semibold py-3 px-4 rounded-lg border-2 border-gray-200 hover:bg-indigo-50 transition duration-150 shadow-md text-left" data-index="3"></button>
                </div>

                <!-- Modo Digitação (Opcional) -->
                <div id="quiz-typing-container" class="hidden space-y-3">
                    <input type="text" id="typing-input" placeholder="Digite a tradução..." class="w-full rounded-lg border-2 border-gray-300 p-3 shadow-md focus:border-indigo-500 focus:ring focus:ring-indigo-200 focus:ring-opacity-50">
                    <button id="typing-submit-btn" class="w-full bg-blue-500 text-white font-semibold py-3 rounded-lg hover:bg-blue-600 transition duration-300">
                        Verificar
                    </button>
                    <p id="typing-message" class="text-center mt-2 text-sm font-medium"></p>
                </div>

                <!-- Botões de Ação Após Revelar -->
                <div id="review-result-controls" class="hidden flex justify-center space-x-4 mt-4">
                    <button id="btn-next-card" class="bg-indigo-500 text-white font-semibold py-2 px-6 rounded-lg hover:bg-indigo-600 transition duration-300">Próximo Card</button>
                </div>

                <p id="revisao-message" class="text-center mt-4 text-sm text-gray-600">...</p>

            </div>

            <button id="btn-back-from-revisao" class="mt-8 text-gray-500 hover:text-gray-700 font-medium">← Voltar para Home</button>
        </div>

        <!-- 5. Tela de Biblioteca (Arquivo) -->
        <div id="view-biblioteca" class="view hidden w-full p-4">
            <h1 class="text-3xl font-bold text-gray-800 mb-6 text-center">BIBLIOTECA DE FLASHCARDS</h1>

            <div class="overflow-x-auto bg-white rounded-xl shadow-2xl p-4">
                <table class="min-w-full divide-y divide-gray-200">
                    <thead class="bg-gray-50">
                        <tr>
                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">#</th>
                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Idioma</th>
                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Palavra / Frase</th>
                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Nível Ebbinghaus</th>
                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Próxima Revisão</th>
                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Ações</th>
                        </tr>
                    </thead>
                    <tbody id="biblioteca-table-body" class="bg-white divide-y divide-gray-200">
                        <!-- Linhas da tabela serão inseridas aqui -->
                    </tbody>
                </table>
                <p id="biblioteca-message" class="text-center p-4 text-gray-500">...</p>
            </div>

            <button id="btn-back-from-biblioteca" class="mt-8 text-gray-500 hover:text-gray-700 font-medium">← Voltar para Home</button>
        </div>

    </div>

    <!-- Carrega o script principal da aplicação -->
    <script type="module" src="script.js"></script>
</body>
</html>